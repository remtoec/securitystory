<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>戀愛大冒險 (Relationship Adventure)</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        /* Prevent scrolling and bounce effects on mobile */
        body, html {
            height: 100%;
            overflow: hidden;
            overscroll-behavior: none;
        }
        /* Custom font fallback */
        .font-comic {
            font-family: 'Comic Sans MS', 'Chalkboard SE', 'Comic Neue', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- Icons (Inline SVGs to avoid dependencies) ---
        const IconBase = ({ size = 24, color = "currentColor", fill = "none", children, className = "" }) => (
            <svg 
                xmlns="http://www.w3.org/2000/svg" 
                width={size} 
                height={size} 
                viewBox="0 0 24 24" 
                fill={fill} 
                stroke={color} 
                strokeWidth="2" 
                strokeLinecap="round" 
                strokeLinejoin="round"
                className={className}
            >
                {children}
            </svg>
        );

        const MessageCircle = (props) => (
            <IconBase {...props}>
                <path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z" />
            </IconBase>
        );

        const Heart = (props) => (
            <IconBase {...props}>
                <path d="M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z" />
            </IconBase>
        );

        const ArrowRight = (props) => (
            <IconBase {...props}>
                <path d="M5 12h14" />
                <path d="m12 5 7 7-7 7" />
            </IconBase>
        );

        const RefreshCcw = (props) => (
            <IconBase {...props}>
                <path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8" />
                <path d="M3 3v5h5" />
                <path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16" />
                <path d="M16 16h5v5" />
            </IconBase>
        );

        const User = (props) => (
            <IconBase {...props}>
                <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" />
                <circle cx="12" cy="7" r="4" />
            </IconBase>
        );

        const BookOpen = (props) => (
            <IconBase {...props}>
                <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z" />
                <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z" />
            </IconBase>
        );

        // --- Main App Component ---
        const RelationshipComic = () => {
            const [gameState, setGameState] = useState('setup'); 
            const [userGender, setUserGender] = useState(null); // 'M' or 'F'
            
            const [currentStoryIndex, setCurrentStoryIndex] = useState(0);
            const [currentSceneIndex, setCurrentSceneIndex] = useState(0);
            const [scores, setScores] = useState({ secure: 0, insecure: 0 });
            const [history, setHistory] = useState([]);
            const [branchPath, setBranchPath] = useState(null);

            // Dynamic Content Generation
            const getStories = (gender) => {
                const isUserMale = gender === 'M';
                
                const partner1 = isUserMale ? "Rachel" : "Ryan";
                const partner2 = isUserMale ? "Stacy" : "Steven"; 
                const partner4 = isUserMale ? "Christy" : "Chris"; 
                
                const rivalDescription = isUserMale ? "同你差唔多大嘅男仔" : "同你差唔多大嘅女仔";
                const neighborLabel = "一齊長大嘅街坊";
                const friendGroup = isUserMale ? "姊妹" : "兄弟";
                const himHer = "佢"; 

                return [
                {
                    id: 'story1',
                    title: `故事一：${partner1} 的情境`,
                    scenes: [
                    {
                        id: 's1_1',
                        narrator: `${partner1} 成晚都喺屋企照顧緊你。突然間，${himHer}收到個電話，行咗去另一間房聽。${himHer}返嚟話頭先係 Ex 打嚟 Say Hello。你知道佢哋再見亦是朋友，間唔中都有聯絡。`,
                        dialogue: {
                        speaker: partner1,
                        text: "其實我仲有同個 Ex 聯絡，你介唔介意㗎？"
                        },
                        options: [
                        { label: "A", text: "OK 呀，再見亦是朋友嘛，我都戥你開心嘅。", type: 'secure' },
                        { label: "B", text: "麻麻地囉，硬係覺得你哋兩個仲有啲嘢咁。", type: 'insecure' }
                        ]
                    },
                    {
                        id: 's1_2',
                        narrator: `${partner1} 繼續講${himHer}前度嘅嘢，你開始覺得有啲呷醋。其實上個禮拜，有個你以前幾好感嘅人打嚟約你出街，但當時你覺得無咩大不了所以無講。而家你突然醒返起呢單嘢，心諗如果講佢知，佢應該都會呷醋。`,
                        dialogue: {
                        speaker: "內心獨白",
                        text: "佢係咁講個 Ex... 我應唔應該提下有人約我嗰單嘢?"
                        },
                        options: [
                        { label: "A", text: "唔提算數，費事佢呷醋。", type: 'secure' },
                        { label: "B", text: "扮無嘢提下有人約我，希望佢會覺得有啲呷醋。", type: 'insecure' }
                        ]
                    },
                    {
                        id: 's1_3',
                        narrator: `之後嗰個禮拜，${partner1} 嚟到你屋企。你哋一齊玩得好開心嗰陣，開始傾起關於你哋段關係嘅話題。`,
                        dialogue: {
                        speaker: partner1,
                        text: "我覺得我哋開始認真喇，係時候傾下大家嘅將來點行。"
                        },
                        options: [
                        { label: "A", text: "好提議呀，大家目標一致，段關係先長久嘛。", type: 'secure' },
                        { label: "B", text: "不如我哋分開冷靜下...（你驚佢想分手，所以你想斬纜先）", type: 'insecure' }
                        ],
                        isEnd: true
                    }
                    ]
                },
                {
                    id: 'story2',
                    title: `故事二：${partner2} (支持型)`,
                    scenes: [
                    {
                        id: 's2_1',
                        narrator: `今日你去 ${partner2} 屋企食飯見家長。${partner2} 感覺到你有些少緊張，所以成晚都攬實你安撫你。食食下飯門鐘響，有個${rivalDescription}行入嚟，好熱情咁行埋去攬咗 ${partner2} 一下。${partner2} 介紹話佢係${neighborLabel}。嗰個人走嗰陣，畀咗個新電話號碼 ${partner2} 叫佢得閒搵佢。\n\n你哋食完飯上返車，準備走嗰陣...`,
                        dialogue: {
                        speaker: "內心獨白",
                        text: "佢哋似係老死，不過頭先個動作..."
                        },
                        options: [
                        { label: "A", text: "唔出聲，當佢哋係老死就算。", type: 'secure' },
                        { label: "B", text: `直接叫佢唔好打畀嗰個人。`, type: 'insecure' }
                        ]
                    },
                    {
                        id: 's2_2',
                        narrator: `${partner2} 開始講起嗰個人，話佢哋一齊長大，係好耐嘅老死。見你無咩點出聲，佢就主動向你保證，話佢無打算打畀對方。\n\n之後喺返屋企途中，你約 ${partner2} 聽晚食飯。佢話：「我約咗朋友出去呀。」你以前都同過佢成班朋友出去好多次，所以當佢就咁完咗個話題又無叫埋你，你覺得好驚訝。`,
                        dialogue: {
                        speaker: "你",
                        text: "..."
                        },
                        options: [
                        { label: "A", text: `問：「係咪成班${friendGroup}去玩呀？」`, type: 'secure' },
                        { label: "B", text: "問：「係咪有咩唔妥呀？」", type: 'insecure' }
                        ],
                        isEnd: true
                    }
                    ]
                },
                {
                    id: 'story3',
                    title: `故事三：${partner2} (不支持型)`,
                    scenes: [
                    {
                        id: 's3_1',
                        narrator: `今日你去 ${partner2} 屋企食飯見家長。食食下飯門鐘響，有個${rivalDescription}行入嚟，好熱情咁行埋去攬咗 ${partner2} 一下。${partner2} 介紹話佢係${neighborLabel}。有一刻，${partner2} 淨係顧住同嗰個人傾偈，無視你講緊咩。嗰個人走嗰陣，畀咗個新電話號碼 ${partner2} 叫佢得閒搵佢。\n\n你哋食完飯上返車，準備走嗰陣...`,
                        dialogue: {
                        speaker: "內心獨白",
                        text: "佢完全當我透明，嗰個人仲要畀埋電話佢..."
                        },
                        options: [
                        { label: "A", text: "唔出聲，當佢哋係老死就算。", type: 'secure' },
                        { label: "B", text: `直接叫佢唔好打畀嗰個人。`, type: 'insecure' }
                        ]
                    },
                    {
                        id: 's3_2',
                        narrator: `${partner2} 提到佢哋係一齊長大嘅老死。之後喺返屋企途中，你約 ${partner2} 聽晚食飯。佢話：「我約咗朋友出去呀。」你以前都同過佢成班朋友出去好多次，所以當佢就咁轉話題又無叫埋你，你覺得好驚訝。`,
                        dialogue: {
                        speaker: "你",
                        text: "..."
                        },
                        options: [
                        { label: "A", text: `問：「係咪成班${friendGroup}去玩呀？」`, type: 'secure' },
                        { label: "B", text: "問：「係咪有咩唔妥呀？」", type: 'insecure' }
                        ],
                        isEnd: true
                    }
                    ]
                },
                {
                    id: 'story4',
                    title: `故事四：${partner4} 分支`,
                    isBranching: true,
                    scenes: [
                    {
                        id: 's4_1',
                        branchId: 'root',
                        narrator: `${partner4} 收個電話行開咗。二十分鐘後佢返嚟，話頭先係 Ex 打嚟 Say Hello。你知道佢哋再見亦是朋友，間唔中都有聯絡。`,
                        dialogue: {
                        speaker: partner4,
                        text: "其實我仲有同個 Ex 聯絡，你介唔介意㗎？"
                        },
                        options: [
                        { label: "A", text: "OK 呀，再見亦是朋友嘛，我都戥你開心嘅。", type: 'secure', setBranch: 'path_a' },
                        { label: "B", text: "麻麻地囉，硬係覺得你哋兩個仲有啲嘢咁。", type: 'insecure', setBranch: 'path_b' }
                        ]
                    },
                    {
                        id: 's4_2_a',
                        branchId: 'path_a',
                        narrator: `${partner4} 安慰你話佢同前度無嘢，佢淨係在意你一個。不過，佢繼續講關於前度嘅嘢，你開始覺得有啲呷醋。你醒起上個禮拜有個你以前幾好感嘅人打嚟約你，但你當時無提。`,
                        dialogue: {
                        speaker: "內心獨白",
                        text: "佢係咁講個 Ex... 我應唔應該提下有人約我嗰單嘢?"
                        },
                        options: [
                        { label: "A", text: "唔提算數，費事佢呷醋。", type: 'secure' },
                        { label: "B", text: "扮無嘢提下有人約我，希望佢會覺得有啲呷醋。", type: 'insecure' }
                        ],
                        isEnd: true
                    },
                    {
                        id: 's4_2_b',
                        branchId: 'path_b',
                        narrator: `${partner4} 話：「我都唔明點解你會咁諗，你成日都亂咁擔心。」佢繼續講關於前度嘅嘢，你開始覺得有啲呷醋。你醒起上個禮拜有個你以前幾好感嘅人打嚟約你，但你當時無提。`,
                        dialogue: {
                        speaker: "內心獨白",
                        text: "佢係咁講個 Ex... 我應唔應該提下有人約我嗰單嘢?"
                        },
                        options: [
                        { label: "A", text: "唔提算數，費事佢呷醋。", type: 'secure' },
                        { label: "B", text: "扮無嘢提下有人約我，希望佢會覺得有啲呷醋。", type: 'insecure' }
                        ],
                        isEnd: true
                    }
                    ]
                }
                ];
            };

            // Setup Stories based on selected gender
            const stories = userGender ? getStories(userGender) : [];

            const handleGenderSelect = (gender) => {
                setUserGender(gender);
                setGameState('intro');
            };

            const handleStart = () => {
                setCurrentStoryIndex(0);
                setCurrentSceneIndex(0);
                setScores({ secure: 0, insecure: 0 });
                setHistory([]);
                setBranchPath(null);
                setGameState('transition'); 
            };

            const handleNextStory = () => {
                setGameState('playing');
            };

            const handleOptionClick = (option) => {
                setScores(prev => ({
                ...prev,
                [option.type]: prev[option.type] + 1
                }));

                if (option.setBranch) {
                setBranchPath(option.setBranch);
                }

                const currentStory = stories[currentStoryIndex];
                const currentScene = currentStory.scenes[currentSceneIndex];

                if (currentScene.isEnd) {
                    if (currentStoryIndex + 1 < stories.length) {
                        setCurrentStoryIndex(prev => prev + 1);
                        setCurrentSceneIndex(0);
                        setBranchPath(null);
                        setGameState('transition');
                    } else {
                        setGameState('summary');
                    }
                    return;
                }

                let nextSceneIdx = currentSceneIndex + 1;

                if (currentStory.isBranching) {
                const activeBranch = option.setBranch || branchPath;
                const targetIndex = currentStory.scenes.findIndex(s => s.branchId === activeBranch);
                if (targetIndex !== -1) {
                    nextSceneIdx = targetIndex;
                }
                }

                if (nextSceneIdx < currentStory.scenes.length) {
                    setCurrentSceneIndex(nextSceneIdx);
                } else {
                    setGameState('summary'); 
                }
            };

            // 1. Setup Screen
            if (gameState === 'setup') {
                return (
                <div className="h-[100dvh] bg-cyan-300 p-4 flex items-center justify-center font-sans overflow-hidden">
                    <div className="w-full max-w-md bg-white border-4 border-black shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] p-6 text-center rounded-sm">
                    <h1 className="text-3xl font-black uppercase mb-6 tracking-tight text-black transform -rotate-1">
                        請選擇你的性別
                    </h1>
                    <p className="text-lg mb-6 text-gray-700 font-bold">
                        我們會根據你的性別調整故事角色，令你更有代入感。
                    </p>
                    <div className="grid grid-cols-2 gap-4">
                        <button 
                        onClick={() => handleGenderSelect('M')}
                        className="bg-blue-200 p-4 border-4 border-black hover:bg-blue-300 active:bg-blue-400 transition-all flex flex-col items-center gap-2 active:translate-y-1 active:shadow-none shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]"
                        >
                        <User size={40} className="text-black"/>
                        <span className="text-xl font-black text-black">我是男生</span>
                        </button>
                        <button 
                        onClick={() => handleGenderSelect('F')}
                        className="bg-pink-200 p-4 border-4 border-black hover:bg-pink-300 active:bg-pink-400 transition-all flex flex-col items-center gap-2 active:translate-y-1 active:shadow-none shadow-[4px_4px_0px_0px_rgba(0,0,0,1)]"
                        >
                        <User size={40} className="text-black" />
                        <span className="text-xl font-black text-black">我是女生</span>
                        </button>
                    </div>
                    </div>
                </div>
                );
            }

            // 2. Intro Screen
            if (gameState === 'intro') {
                return (
                <div className="h-[100dvh] bg-yellow-400 p-4 flex items-center justify-center font-sans overflow-hidden">
                    <div className="w-full max-w-md bg-white border-4 border-black shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] p-6 flex flex-col max-h-full">
                    <div className="flex justify-between items-center mb-4 border-b-4 border-black pb-2">
                        <h1 className="text-4xl font-black uppercase tracking-tighter text-black transform -rotate-2">
                        戀愛大冒險
                        </h1>
                    </div>
                    
                    <div className="flex-1 flex flex-col justify-center items-center mb-4">
                        <div className="bg-blue-500 p-4 border-4 border-black shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] mb-4">
                            <Heart size={60} color="white" fill="white" />
                        </div>
                        <p className="text-lg font-bold mb-2 leading-snug text-black text-center">
                            經歷四個唔同嘅戀愛故事。你嘅選擇將會反映你嘅依戀風格係屬於「安全型」定係「不安全型」。
                        </p>
                    </div>

                    <button 
                        onClick={handleStart}
                        className="w-full bg-red-500 text-white text-xl font-black py-4 border-4 border-black hover:bg-red-600 active:bg-red-700 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] transition-all active:translate-y-1 active:shadow-none rounded-sm shrink-0"
                    >
                        開始遊戲
                    </button>
                    </div>
                </div>
                );
            }

            // 3. Story Transition Screen
            if (gameState === 'transition') {
                return (
                <div className="h-[100dvh] bg-purple-600 p-4 flex items-center justify-center font-sans overflow-hidden">
                    <div className="w-full max-w-md bg-white border-4 border-black shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] p-8 text-center animate-in fade-in zoom-in duration-300">
                        <div className="inline-block bg-black text-white px-3 py-1 font-black text-lg uppercase mb-4 transform -rotate-2 border-2 border-white">
                            Coming Up Next
                        </div>
                        <h2 className="text-3xl font-black uppercase mb-4 leading-tight text-black">
                            {stories[currentStoryIndex].title}
                        </h2>
                        <div className="w-16 h-2 bg-yellow-400 border-2 border-black mb-6 mx-auto transform rotate-3"></div>
                        
                        <p className="text-lg text-gray-800 mb-8 font-bold">
                            準備好做決定未？
                        </p>

                        <button 
                            onClick={handleNextStory}
                            className="w-full bg-green-400 text-black text-xl font-black py-4 border-4 border-black hover:bg-green-500 active:bg-green-600 shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] transition-all flex items-center justify-center gap-3 rounded-sm active:translate-y-1 active:shadow-none"
                        >
                            <span>進入場景</span>
                            <ArrowRight size={24} strokeWidth={3} />
                        </button>
                    </div>
                </div>
                );
            }

            // 4. Summary Screen
            if (gameState === 'summary') {
                const total = scores.secure + scores.insecure;
                const securePercent = Math.round((scores.secure / total) * 100);

                return (
                <div className="h-[100dvh] bg-teal-500 p-4 flex items-center justify-center font-sans overflow-hidden">
                    <div className="w-full max-w-md bg-white border-4 border-black shadow-[8px_8px_0px_0px_rgba(0,0,0,1)] p-6 flex flex-col max-h-full">
                    <h2 className="text-3xl font-black uppercase mb-4 text-center text-black shrink-0">
                        結局！
                    </h2>

                    <div className="grid grid-cols-2 gap-3 mb-4 shrink-0">
                        <div className="bg-green-100 p-3 border-4 border-black text-center rounded-lg shadow-[2px_2px_0px_0px_rgba(0,0,0,1)]">
                        <div className="text-4xl font-black mb-1 text-black">{scores.secure}</div>
                        <div className="font-bold text-xs uppercase text-black">安全型選擇</div>
                        </div>
                        <div className="bg-red-100 p-3 border-4 border-black text-center rounded-lg shadow-[2px_2px_0px_0px_rgba(0,0,0,1)]">
                        <div className="text-4xl font-black mb-1 text-black">{scores.insecure}</div>
                        <div className="font-bold text-xs uppercase text-black">不安全型選擇</div>
                        </div>
                    </div>

                    <div className="mb-4 border-t-4 border-black pt-4 flex-1 overflow-y-auto min-h-0">
                        <h3 className="text-xl font-bold mb-2 text-black">分析</h3>
                        <p className="text-lg leading-relaxed text-black font-medium">
                        {securePercent > 70 
                            ? "你主要表現出「安全型」依戀風格！你信任伴侶並且願意坦誠溝通。"
                            : securePercent > 40
                            ? "你表現出混合嘅風格。有時你會信任對方，但有時亦會容易呷醋。"
                            : "你傾向於「不安全型」依戀風格。喺有壓力嘅時候，你可能會容易呷醋或者選擇逃避。"
                        }
                        </p>
                    </div>

                    <button 
                        onClick={() => setGameState('setup')}
                        className="w-full bg-yellow-400 text-black text-lg font-black py-3 border-4 border-black hover:bg-yellow-500 active:bg-yellow-600 flex justify-center items-center gap-2 rounded-sm shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] active:translate-y-1 active:shadow-none shrink-0"
                    >
                        <RefreshCcw size={20} />
                        再玩一次
                    </button>
                    </div>
                </div>
                );
            }

            // 5. Playing Screen
            const currentStory = stories[currentStoryIndex];
            const currentScene = currentStory.scenes[currentSceneIndex];
            const sceneKey = `${currentStory.id}-${currentScene.id}`;

            return (
                <div className="h-[100dvh] bg-sky-200 p-2 md:p-4 font-sans flex justify-center overflow-hidden">
                <div className="w-full max-w-lg flex flex-col gap-2 md:gap-4 h-full">
                    
                    {/* Header */}
                    <div className="shrink-0 flex justify-between items-center bg-white border-4 border-black px-3 py-2 shadow-[2px_2px_0px_0px_rgba(0,0,0,1)] rounded-sm">
                    <div className="font-black uppercase text-base md:text-xl tracking-wide truncate mr-2 text-black">
                        {currentStory.title}
                    </div>
                    <div className="text-xs md:text-sm font-bold bg-black text-white px-2 py-1 whitespace-nowrap rounded-sm">
                        {currentStoryIndex + 1} / {stories.length}
                    </div>
                    </div>

                    {/* Content Area */}
                    <div className="flex-1 flex flex-col gap-2 min-h-0">
                    
                    {/* Narrator Panel */}
                    <div className="shrink-0 max-h-[25%] bg-yellow-200 border-4 border-black p-0 relative shadow-[4px_4px_0px_0px_rgba(0,0,0,0.2)] rounded-sm overflow-hidden flex flex-col">
                        <div className="bg-black text-white px-2 py-1 font-bold text-xs uppercase inline-block border-b-4 border-r-4 border-black self-start">
                            SCENE
                        </div>
                        <div className="p-3 pt-1 overflow-y-auto">
                            <p className="text-base md:text-lg font-bold leading-snug text-black font-comic">
                            {currentScene.narrator}
                            </p>
                        </div>
                    </div>

                    {/* Dialogue Panel */}
                    <div className="shrink-0 max-h-[35%] flex flex-col items-start pl-0 md:pl-4 min-h-0">
                        <div className="shrink-0 mb-1 font-black uppercase text-xs text-black ml-1 tracking-wider flex items-center gap-1 bg-white border-2 border-black px-2 py-0.5 inline-flex transform -rotate-1">
                        {currentScene.dialogue.speaker === '內心獨白' ? <BookOpen size={12}/> : <User size={12}/>}
                        {currentScene.dialogue.speaker === '內心獨白' ? "內心獨白" : currentScene.dialogue.speaker}
                        </div>
                        
                        <div className={`relative w-full border-4 border-black p-4 rounded-xl shadow-[4px_4px_0px_0px_rgba(0,0,0,0.2)] flex-1 overflow-y-auto
                            ${currentScene.dialogue.speaker === '內心獨白' ? 'bg-pink-50 border-dashed' : 'bg-white'}`}>
                            
                            {/* Speech Bubble Tail */}
                            <div className={`absolute top-4 -left-3 w-4 h-4 border-t-4 border-l-4 border-black bg-white transform -rotate-45 pointer-events-none 
                                ${currentScene.dialogue.speaker === '內心獨白' ? 'hidden' : 'block'}`}></div>
                            
                            {/* Thought Bubble Circles */}
                            <div className={`absolute top-4 -left-6 flex flex-col gap-1 items-center 
                                ${currentScene.dialogue.speaker === '內心獨白' ? 'block' : 'hidden'}`}>
                                <div className="w-1.5 h-1.5 rounded-full bg-pink-300 border-2 border-black"></div>
                                <div className="w-2.5 h-2.5 rounded-full bg-pink-300 border-2 border-black"></div>
                            </div>

                            <p className="text-lg md:text-xl font-bold text-black leading-snug">
                            "{currentScene.dialogue.text}"
                            </p>
                        </div>
                    </div>

                    {/* Choices */}
                    <div className="flex-1 min-h-0 flex flex-col justify-end mt-1">
                        <div className="shrink-0 font-bold mb-2 text-black uppercase tracking-widest text-xs flex items-center gap-1 ml-1">
                            <div className="bg-blue-500 text-white p-0.5 border-2 border-black"><MessageCircle size={14} /></div>
                            你的回應 (Your Reply)
                        </div>
                        <div className="grid grid-cols-1 gap-2 overflow-y-auto pb-1">
                            {currentScene.options.map((opt, idx) => (
                            <button 
                                key={`${sceneKey}-${idx}`}
                                onClick={() => handleOptionClick(opt)}
                                className="group relative bg-white border-4 border-black p-3 text-left hover:bg-cyan-100 active:bg-cyan-200 transition-all active:scale-[0.98] shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] active:shadow-none rounded-lg shrink-0"
                            >
                                <div className="flex items-start gap-3">
                                <div className="bg-black text-white w-8 h-8 flex-shrink-0 flex items-center justify-center font-black text-lg rounded-md border-2 border-transparent group-hover:border-black">
                                    {opt.label}
                                </div>
                                <span className="text-base md:text-lg font-bold text-black group-hover:text-blue-800 leading-snug">
                                    {opt.text}
                                </span>
                                </div>
                            </button>
                            ))}
                        </div>
                    </div>

                    </div>

                </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<RelationshipComic />);
    </script>
</body>
</html>